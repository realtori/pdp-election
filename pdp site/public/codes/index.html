<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="../codes/index.css">
	<title>Home</title>
</head>
<body>
	<div class="epep">
		<div class="img1">
		<img src="../img/man.png">
		</div>
		<div class="img2">
		<img src="../img/logo.png">
		</div>
	</div>
	<div class="form">
		<div class="sub-form">
	<form>
		<div>
		<p>Sign Up</p>
		</div>
		<div class="input-field">
		<input type="email" name="Email" placeholder="Input Your Email" required="required" id="email">
		</div>
		<div class="input-field">
		<input type="text" name="phone number" placeholder="Input Your Number" required="required">
		</div>
		<div class="input-field">
		<input type="password" name="password" placeholder="Create password" required="required" id="password">
		</div>
		<div class="" id="include">
		<input type="submit" name="submit" id="submitData">
		</div>
		</div>
	</form>	
		</div>
	</div>
		<div class="int">
			<div>
		<p >THE PEOPLE'S </p>
		<p class="the">MANDATE</p>
			</div>
		</div>
		<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-app.js";
  import { getAuth, createUserWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-auth.js";
  import { getDatabase,set,ref } from "https://www.gstatic.com/firebasejs/9.17.1/firebase-database.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyAvJQDM3VhnDiWAWqkL1rhDYK7iGYsQkVE",
    authDomain: "pdp-election.firebaseapp.com",
    projectId: "pdp-election",
    storageBucket: "pdp-election.appspot.com",
    messagingSenderId: "1025189067189",
    appId: "1:1025189067189:web:16796b0c307edf08a501fc"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const database = getDatabase(app);

  submitData.addEventListener("click", (e) =>{

  	var email = document.getElementById("email").value;
  	var password = document.getElementById("password ").value;

  	createUserWithEmailAndPassword(auth, email, password)
  .then((userCredential) => {
    // Signed in 
    const user = userCredential.user;
    set(ref(database, 'users/' + user,uid), {
    email: email,
    password : password
  });
    	.then(() => {
  // Data saved successfully!
    	alert("user created sucessfully")
    	window.location = "../codes/index1.html"
})
.catch((error) => {
  // The write failed...
	alert(error)
});

    // ...
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;
    // ..
  });
  });

</script>
</body>
</html>